# YL-AR-DGN ç”Ÿäº§éƒ¨ç½²æŒ‡å—

**ç‰ˆæœ¬:** 1.0.0  
**åˆ›å»ºæ—¥æœŸ:** 2026-02-16  
**éƒ¨ç½²ç›®æ ‡:** ç”Ÿäº§çŽ¯å¢ƒ

---

## ðŸ“‹ éƒ¨ç½²æ¦‚è¿°

### éƒ¨ç½²ç›®æ ‡
å°† YL-AR-DGN é¡¹ç›®å®Œæ•´éƒ¨ç½²åˆ°ç”Ÿäº§çŽ¯å¢ƒï¼ŒåŒ…æ‹¬ï¼š
- YL-monitor ç»Ÿä¸€ç›‘æŽ§å¹³å°
- AR-backend å®žæ—¶è§†é¢‘å¤„ç†åŽç«¯
- User GUI ç”¨æˆ·æ“ä½œç•Œé¢
- äº”å±‚è§„åˆ™æž¶æž„
- å¢žå¼ºç›‘æŽ§ç»„ä»¶ï¼ˆ6ä¸ªç›‘æŽ§å™¨ï¼‰

### éƒ¨ç½²æž¶æž„
```
ç”Ÿäº§æœåŠ¡å™¨
â”œâ”€â”€ YL-monitor (ç«¯å£5500) - ç»Ÿä¸€ç›‘æŽ§
â”œâ”€â”€ AR-backend (ç«¯å£5501) - è§†é¢‘å¤„ç†
â”œâ”€â”€ User GUI (ç«¯å£5502) - ç”¨æˆ·ç•Œé¢
â””â”€â”€ å¢žå¼ºç›‘æŽ§ç»„ä»¶ - 70+ç›‘æŽ§æŒ‡æ ‡
```

---

## ðŸš€ éƒ¨ç½²å‰å‡†å¤‡

### 1. çŽ¯å¢ƒè¦æ±‚

| é¡¹ç›® | æœ€ä½Žè¦æ±‚ | æŽ¨èé…ç½® |
|------|----------|----------|
| **æ“ä½œç³»ç»Ÿ** | Ubuntu 20.04 LTS | Ubuntu 22.04 LTS |
| **CPU** | 8æ ¸ | 16æ ¸+ |
| **å†…å­˜** | 16GB | 32GB+ |
| **ç£ç›˜** | 100GB SSD | 500GB+ NVMe SSD |
| **ç½‘ç»œ** | 100Mbps | 1Gbps |
| **GPU** | NVIDIA GTX 1060 6GB | RTX 3060 12GB+ |

### 2. è½¯ä»¶ä¾èµ–

```bash
# ç³»ç»Ÿä¾èµ–
sudo apt update && sudo apt upgrade -y
sudo apt install -y python3.10 python3-pip python3-venv
sudo apt install -y git curl wget net-tools
sudo apt install -y libgl1-mesa-glx libglib2.0-0 libsm6 libxext6 libxrender-dev

# Dockerï¼ˆå¯é€‰ï¼‰
sudo apt install -y docker.io docker-compose
sudo systemctl enable docker
sudo usermod -aG docker $USER
```

### 3. Python çŽ¯å¢ƒ

```bash
# åˆ›å»ºè™šæ‹ŸçŽ¯å¢ƒ
python3 -m venv /opt/yl-ar-dgn/venv
source /opt/yl-ar-dgn/venv/bin/activate

# å®‰è£…åŸºç¡€ä¾èµ–
pip install --upgrade pip
pip install fastapi uvicorn flask pyqt5 opencv-python numpy requests psutil python-socketio
```

---

## ðŸ“¦ éƒ¨ç½²æ­¥éª¤

### æ­¥éª¤1: èŽ·å–ä»£ç 

```bash
# åˆ›å»ºéƒ¨ç½²ç›®å½•
sudo mkdir -p /opt/yl-ar-dgn
cd /opt/yl-ar-dgn

# å…‹éš†ä»£ç 
sudo git clone https://github.com/hil6626/yl-ar-dgn_clean.git .
sudo chown -R $USER:$USER /opt/yl-ar-dgn
```

### æ­¥éª¤2: é…ç½®çŽ¯å¢ƒ

```bash
# åˆ›å»ºç”Ÿäº§çŽ¯å¢ƒé…ç½®
cat > /opt/yl-ar-dgn/config/production.env << 'EOF'
# æœåŠ¡ç«¯å£
YL_MONITOR_PORT=5500
AR_BACKEND_PORT=5501
USER_GUI_PORT=5502

# æœåŠ¡åœ°å€
YL_MONITOR_HOST=0.0.0.0
AR_BACKEND_HOST=0.0.0.0
USER_GUI_HOST=0.0.0.0

# æ—¥å¿—çº§åˆ«
LOG_LEVEL=INFO
LOG_PATH=/var/log/yl-ar-dgn

# æ€§èƒ½é…ç½®
MAX_WORKERS=4
TIMEOUT=300

# å®‰å…¨é…ç½®
ALLOWED_HOSTS=*
CORS_ORIGINS=*
EOF

# åˆ›å»ºæ—¥å¿—ç›®å½•
sudo mkdir -p /var/log/yl-ar-dgn
sudo chown -R $USER:$USER /var/log/yl-ar-dgn
```

### æ­¥éª¤3: å®‰è£…ä¾èµ–

```bash
cd /opt/yl-ar-dgn

# YL-monitor ä¾èµ–
pip install -r YL-monitor/requirements.txt

# AR-backend ä¾èµ–
pip install -r AR-backend/requirements/requirements.txt

# User GUI ä¾èµ–ï¼ˆå¦‚æžœæœ‰ï¼‰
[ -f user/requirements.txt ] && pip install -r user/requirements.txt
```

### æ­¥éª¤4: é…ç½®ç³»ç»ŸæœåŠ¡

```bash
# åˆ›å»º YL-monitor æœåŠ¡
sudo tee /etc/systemd/system/yl-monitor.service << 'EOF'
[Unit]
Description=YL-AR-DGN Monitor Service
After=network.target

[Service]
Type=simple
User=yl-ar-dgn
WorkingDirectory=/opt/yl-ar-dgn
Environment=PYTHONPATH=/opt/yl-ar-dgn/YL-monitor
EnvironmentFile=/opt/yl-ar-dgn/config/production.env
ExecStart=/opt/yl-ar-dgn/venv/bin/python YL-monitor/start_server.py
Restart=always
RestartSec=5

[Install]
WantedBy=multi-user.target
EOF

# åˆ›å»º AR-backend æœåŠ¡
sudo tee /etc/systemd/system/ar-backend.service << 'EOF'
[Unit]
Description=AR Backend Service
After=network.target

[Service]
Type=simple
User=yl-ar-dgn
WorkingDirectory=/opt/yl-ar-dgn
Environment=PYTHONPATH=/opt/yl-ar-dgn/AR-backend
EnvironmentFile=/opt/yl-ar-dgn/config/production.env
ExecStart=/opt/yl-ar-dgn/venv/bin/python AR-backend/monitor_server.py
Restart=always
RestartSec=5

[Install]
WantedBy=multi-user.target
EOF

# åˆ›å»º User GUI æœåŠ¡
sudo tee /etc/systemd/system/user-gui.service << 'EOF'
[Unit]
Description=User GUI Service
After=network.target

[Service]
Type=simple
User=yl-ar-dgn
WorkingDirectory=/opt/yl-ar-dgn
Environment=PYTHONPATH=/opt/yl-ar-dgn/user
EnvironmentFile=/opt/yl-ar-dgn/config/production.env
ExecStart=/opt/yl-ar-dgn/venv/bin/python user/main.py
Restart=always
RestartSec=10

[Install]
WantedBy=multi-user.target
EOF

# åˆ›å»ºç”¨æˆ·å¹¶è®¾ç½®æƒé™
sudo useradd -r -s /bin/false yl-ar-dgn
sudo chown -R yl-ar-dgn:yl-ar-dgn /opt/yl-ar-dgn
sudo chown -R yl-ar-dgn:yl-ar-dgn /var/log/yl-ar-dgn
```

### æ­¥éª¤5: é…ç½®é˜²ç«å¢™

```bash
# å¼€æ”¾æœåŠ¡ç«¯å£
sudo ufw allow 5500/tcp  # YL-monitor
sudo ufw allow 5501/tcp  # AR-backend
sudo ufw allow 5502/tcp  # User GUI
sudo ufw allow 22/tcp    # SSH
sudo ufw enable
```

### æ­¥éª¤6: å¯åŠ¨æœåŠ¡

```bash
# é‡æ–°åŠ è½½ systemd
sudo systemctl daemon-reload

# å¯ç”¨æœåŠ¡
sudo systemctl enable yl-monitor
sudo systemctl enable ar-backend
sudo systemctl enable user-gui

# å¯åŠ¨æœåŠ¡
sudo systemctl start yl-monitor
sudo systemctl start ar-backend
sudo systemctl start user-gui

# æ£€æŸ¥çŠ¶æ€
sudo systemctl status yl-monitor
sudo systemctl status ar-backend
sudo systemctl status user-gui
```

---

## âœ… éƒ¨ç½²éªŒè¯

### 1. æœåŠ¡å¥åº·æ£€æŸ¥

```bash
# æ£€æŸ¥æ‰€æœ‰æœåŠ¡çŠ¶æ€
curl http://localhost:5500/api/health
curl http://localhost:5501/health
curl http://localhost:5502/health

# æ£€æŸ¥å¢žå¼ºç›‘æŽ§API
curl http://localhost:5500/api/v1/monitor/enhanced/summary
```

### 2. ç³»ç»Ÿèµ„æºæ£€æŸ¥

```bash
# æ£€æŸ¥ç«¯å£å ç”¨
sudo netstat -tlnp | grep -E "5500|5501|5502"

# æ£€æŸ¥è¿›ç¨‹çŠ¶æ€
ps aux | grep -E "yl-monitor|ar-backend|user-gui"

# æ£€æŸ¥æ—¥å¿—
sudo tail -f /var/log/yl-ar-dgn/yl-monitor.log
sudo tail -f /var/log/yl-ar-dgn/ar-backend.log
sudo tail -f /var/log/yl-ar-dgn/user-gui.log
```

### 3. åŠŸèƒ½æµ‹è¯•

```bash
# æµ‹è¯•ç›‘æŽ§å™¨å¯¼å…¥
cd /opt/yl-ar-dgn
source venv/bin/activate
python3 -c "from YL-monitor.app.services.enhanced_monitors.business_monitor import BusinessMonitor; print('âœ… ç›‘æŽ§å™¨æ­£å¸¸')"

# æµ‹è¯•API
curl -s http://localhost:5500/api/v1/monitor/enhanced/process | head -5
```

---

## ðŸ”§ è¿ç»´ç®¡ç†

### æ—¥å¸¸è¿ç»´å‘½ä»¤

```bash
# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
sudo systemctl status yl-monitor
sudo systemctl status ar-backend
sudo systemctl status user-gui

# é‡å¯æœåŠ¡
sudo systemctl restart yl-monitor
sudo systemctl restart ar-backend
sudo systemctl restart user-gui

# æŸ¥çœ‹æ—¥å¿—
sudo journalctl -u yl-monitor -f
sudo journalctl -u ar-backend -f
sudo journalctl -u user-gui -f

# åœæ­¢æœåŠ¡
sudo systemctl stop yl-monitor
sudo systemctl stop ar-backend
sudo systemctl stop user-gui
```

### å¤‡ä»½ç­–ç•¥

```bash
# åˆ›å»ºå¤‡ä»½è„šæœ¬
cat > /opt/yl-ar-dgn/scripts/backup.sh << 'EOF'
#!/bin/bash
BACKUP_DIR="/backup/yl-ar-dgn/$(date +%Y%m%d)"
mkdir -p $BACKUP_DIR

# å¤‡ä»½é…ç½®
cp -r /opt/yl-ar-dgn/config $BACKUP_DIR/

# å¤‡ä»½æ•°æ®
cp -r /opt/yl-ar-dgn/data $BACKUP_DIR/

# å¤‡ä»½æ—¥å¿—
tar czf $BACKUP_DIR/logs.tar.gz /var/log/yl-ar-dgn/

# ä¿ç•™æœ€è¿‘7å¤©å¤‡ä»½
find /backup/yl-ar-dgn -type d -mtime +7 -exec rm -rf {} \;
EOF

chmod +x /opt/yl-ar-dgn/scripts/backup.sh

# æ·»åŠ å®šæ—¶ä»»åŠ¡
echo "0 2 * * * /opt/yl-ar-dgn/scripts/backup.sh" | sudo crontab -
```

---

## ðŸš¨ æ•…éšœæŽ’æŸ¥

### å¸¸è§é—®é¢˜

| é—®é¢˜ | åŽŸå›  | è§£å†³æ–¹æ¡ˆ |
|------|------|----------|
| æœåŠ¡å¯åŠ¨å¤±è´¥ | ç«¯å£è¢«å ç”¨ | æ£€æŸ¥ç«¯å£å ç”¨ï¼Œä¿®æ”¹é…ç½® |
| ç›‘æŽ§å™¨å¯¼å…¥å¤±è´¥ | Pythonè·¯å¾„é—®é¢˜ | æ£€æŸ¥PYTHONPATHè®¾ç½® |
| APIæ— å“åº” | æœåŠ¡æœªå¯åŠ¨ | æ£€æŸ¥æœåŠ¡çŠ¶æ€å’Œæ—¥å¿— |
| æ—¥å¿—ä¸å†™å…¥ | æƒé™é—®é¢˜ | æ£€æŸ¥ç›®å½•æƒé™ |

### æŽ’æŸ¥å‘½ä»¤

```bash
# æ£€æŸ¥æœåŠ¡æ—¥å¿—
sudo journalctl -u yl-monitor --since "1 hour ago"

# æ£€æŸ¥ç«¯å£
sudo netstat -tlnp | grep 5500

# æ£€æŸ¥è¿›ç¨‹
ps aux | grep python

# æ£€æŸ¥ç£ç›˜ç©ºé—´
df -h

# æ£€æŸ¥å†…å­˜ä½¿ç”¨
free -h
```

---

## ðŸ“ž æ”¯æŒè”ç³»

- **é¡¹ç›®æ–‡æ¡£:** https://github.com/hil6626/yl-ar-dgn_clean/tree/main/docs
- **é—®é¢˜åé¦ˆ:** https://github.com/hil6626/yl-ar-dgn_clean/issues
- **éƒ¨ç½²æ”¯æŒ:** è”ç³»ç³»ç»Ÿç®¡ç†å‘˜

---

**éƒ¨ç½²ç‰ˆæœ¬:** 2.4.0  
**éƒ¨ç½²æ—¥æœŸ:** 2026-02-16  
**ç»´æŠ¤è€…:** YL-AR-DGN è¿ç»´å›¢é˜Ÿ
