# YL-AR-DGN 项目整合部署索引

**版本:** 1.0.0  
**创建日期:** 2026-02-09  
**状态:** 部署文档已完成，待执行

## 一、项目概述

本项目是一个多功能集成的 AR 实时处理与监控平台，包含三个核心组件：

| 组件 | 路径 | 技术栈 | 功能 |
|------|------|--------|------|
| YL-monitor | `YL-monitor/` | FastAPI + WebSocket | 统一监控平台 |
| AR-backend | `AR-backend/` | PyQt5 + OpenCV | 实时视频处理后端 |
| User GUI | `user/` | PyQt5 | 用户操作界面 |

## 二、部署文档清单

### 2.1 已创建的部署文档

| 序号 | 文档 | 内容概要 | 状态 |
|------|------|----------|------|
| 1 | [1.项目部署大纲.md](./1.项目部署大纲.md) | 项目整体部署规划 | 已存在 |
| 2 | [2.整体方案.md](./2.整体方案.md) | 整体技术方案 | 已存在 |
| 3 | [3.监控整合方案.md](./3.监控整合方案.md) | YL-monitor 监控 AR-backend 和 User GUI | ✅ 已创建 |
| 4 | [4.User-GUI优化方案.md](./4.User-GUI优化方案.md) | User GUI 功能修复与优化 | ✅ 已创建 |
| 5 | [5.规则架构部署.md](./5.规则架构部署.md) | 五层规则架构部署 | ✅ 已创建 |
| 6 | [6.脚本整合方案.md](./6.脚本整合方案.md) | 脚本目录整合 | ✅ 已创建 |
| 7 | [7.联调测试方案.md](./7.联调测试方案.md) | 端到端测试方案 | ✅ 已创建 |

### 2.2 文档依赖关系

```
1.项目部署大纲.md
    │
    ├──► 2.整体方案.md
            │
            ├──► 3.监控整合方案.md ──► 7.联调测试方案.md
            │
            ├──► 4.User-GUI优化方案.md ──► 7.联调测试方案.md
            │
            ├──► 5.规则架构部署.md ──► 7.联调测试方案.md
            │
            └──► 6.脚本整合方案.md ──► 7.联调测试方案.md
```

## 三、执行路线图

### 3.1 阶段划分

```
┌─────────────────────────────────────────────────────────────┐
│ 阶段1: 监控整合 (预计 2-3 天)                                  │
│ ├── 任务1.1: AR-backend 添加监控端点                          │
│ ├── 任务1.2: User GUI 添加状态上报                            │
│ ├── 任务1.3: YL-monitor 配置监控目标                          │
│ └── 任务1.4: 统一监控面板                                     │
├─────────────────────────────────────────────────────────────┤
│ 阶段2: User GUI 优化 (预计 2-3 天)                            │
│ ├── 任务4.1: 创建 main.py 入口                                │
│ ├── 任务4.2: 创建路径修复模块                                 │
│ ├── 任务4.3: 修复 GUI 导入语句                                │
│ ├── 任务4.4: 创建服务客户端                                   │
│ ├── 任务4.5: 创建配置管理                                     │
│ ├── 任务4.6: 修复 GUI 功能                                    │
│ └── 任务4.7: 添加启动脚本                                     │
├─────────────────────────────────────────────────────────────┤
│ 阶段3: 规则架构部署 (预计 1-2 天)                             │
│ ├── 任务7.1: 完善 L1 元目标层                                 │
│ ├── 任务7.2: 完善 L2 理解层                                   │
│ ├── 任务7.3: 完善 L3 约束层                                   │
│ ├── 任务7.4: 完善 L4 决策层                                   │
│ ├── 任务7.5: 完善 L5 执行层                                   │
│ ├── 任务7.6: 完善规则引擎                                     │
│ └── 任务8.1: 规则集成                                         │
├─────────────────────────────────────────────────────────────┤
│ 阶段4: 脚本整合 (预计 2 天)                                   │
│ ├── 任务9.1: 脚本审查与分类                                   │
│ ├── 任务9.2: 迁移 YL-monitor 通用脚本                          │
│ ├── 任务9.3: 合并重复功能                                     │
│ ├── 任务9.4: 创建统一入口                                     │
│ ├── 任务9.5: 统一配置管理                                     │
│ ├── 任务9.6: 统一日志格式                                     │
│ └── 任务9.7: 统一错误处理                                     │
├─────────────────────────────────────────────────────────────┤
│ 阶段5: 联调测试 (预计 3-4 天)                                 │
│ ├── 任务13.1: 监控整合测试                                    │
│ ├── 任务13.2: User GUI 功能测试                               │
│ ├── 任务13.3: 故障模拟测试                                    │
│ ├── 任务13.4: 脚本整合测试                                    │
│ ├── 任务13.5: 规则架构测试                                    │
│ └── 任务13.6: 端到端测试                                      │
└─────────────────────────────────────────────────────────────┘
```

### 3.2 关键里程碑

| 里程碑 | 预计时间 | 交付物 | 验收标准 |
|--------|----------|--------|----------|
| M1: 监控整合完成 | 第3天 | 监控服务代码 | YL-monitor 显示所有节点 |
| M2: GUI 优化完成 | 第6天 | User GUI 代码 | GUI 功能完整可用 |
| M3: 规则部署完成 | 第8天 | 规则文件 | 规则引擎运行正常 |
| M4: 脚本整合完成 | 第10天 | 统一入口脚本 | 脚本功能完整 |
| M5: 联调测试完成 | 第14天 | 测试报告 | 所有测试通过 |

## 四、快速开始

### 4.1 环境准备

```bash
# 1. 进入项目目录
cd /home/vboxuser/桌面/项目部署/项目1/yl-ar-dgn_clean

# 2. 检查项目结构
ls -la

# 3. 查看 TODO.md 了解当前任务
cat TODO.md
```

### 4.2 按阶段执行

**阶段1: 监控整合**
```bash
# 阅读方案
cat 部署/3.监控整合方案.md

# 执行任务1.1: 创建 AR-backend 监控服务
# 详见文档中的"步骤1"部分
```

**阶段2: User GUI 优化**
```bash
# 阅读方案
cat 部署/4.User-GUI优化方案.md

# 执行任务4.1: 创建 main.py
# 详见文档中的"步骤1"部分
```

**阶段3: 规则架构部署**
```bash
# 阅读方案
cat 部署/5.规则架构部署.md

# 执行任务7.1: 完善 L1 元目标层
# 详见文档中的"步骤1"部分
```

**阶段4: 脚本整合**
```bash
# 阅读方案
cat 部署/6.脚本整合方案.md

# 执行任务9.1: 脚本审查与分类
# 详见文档中的"步骤1"部分
```

**阶段5: 联调测试**
```bash
# 阅读方案
cat 部署/7.联调测试方案.md

# 执行任务13.1: 监控整合测试
# 详见文档中的"4.1"部分
```

## 五、关键文件位置

### 5.1 需要修改的文件

| 文件 | 所属组件 | 修改内容 |
|------|----------|----------|
| `AR-backend/monitor_server.py` | AR-backend | 新建，添加监控端点 |
| `user/main.py` | User GUI | 新建，创建启动入口 |
| `user/core/path_manager.py` | User GUI | 新建，修复导入路径 |
| `user/gui/gui.py` | User GUI | 修改，修复导入语句 |
| `YL-monitor/app/services/ar_monitor.py` | YL-monitor | 修改，添加节点配置 |
| `rules/L1-meta-goal.json` | Rules | 修改，更新目标 |
| `rules/L2-understanding.json` | Rules | 修改，更新需求 |
| `rules/L3-constraints.json` | Rules | 修改，更新约束 |
| `rules/L4-decisions.json` | Rules | 修改，更新决策 |
| `rules/L5-execution.json` | Rules | 修改，更新执行规则 |
| `scripts/yl-ar-dgn.sh` | Scripts | 新建，统一入口 |
| `scripts/config/script_config.yaml` | Scripts | 新建，统一配置 |

### 5.2 验证命令

```bash
# 验证 YL-monitor
curl http://localhost:5500/api/health

# 验证 AR-backend 监控
curl http://localhost:5501/health

# 验证 User GUI 状态
curl http://localhost:5502/status

# 查看项目状态
./scripts/yl-ar-dgn.sh status

# 执行验证
./scripts/yl-ar-dgn.sh validate
```

## 六、问题与支持

### 6.1 常见问题

**Q1: 端口冲突怎么办？**  
A: 修改各组件的配置文件，使用备用端口（5503-5509）

**Q2: 模块导入失败怎么办？**  
A: 检查 `user/core/path_manager.py` 是否正确设置了 Python 路径

**Q3: 监控数据不更新怎么办？**  
A: 检查 WebSocket 连接，查看浏览器控制台日志

### 6.2 调试技巧

```bash
# 查看详细日志
tail -f YL-monitor/logs/app.log
tail -f AR-backend/logs/monitor.log
tail -f user/logs/gui.log

# 检查进程状态
ps aux | grep -E "yl-monitor|ar-backend|user-gui"

# 检查端口占用
netstat -tlnp | grep -E "5500|5501|5502"
```

## 七、关联文档

| 文档 | 位置 | 说明 |
|------|------|------|
| 项目 README | `README.md` | 项目总体说明 |
| AR-backend README | `AR-backend/README.md` | 后端说明 |
| YL-monitor README | `YL-monitor/README.md` | 监控平台说明 |
| 脚本 README | `scripts/README.md` | 脚本说明 |
| 规则 README | `rules/README.md` | 规则说明 |
| 任务跟踪 | `TODO.md` | 当前任务状态 |

## 八、版本历史

| 版本 | 日期 | 修改内容 | 作者 |
|------|------|----------|------|
| 1.0.0 | 2026-02-09 | 初始版本，创建完整部署文档集 | AI 全栈技术员 |

---

**下一步:** 根据 TODO.md 开始执行阶段1任务
