# YL-AR-DGN 项目整合部署索引

**版本:** 1.6.0  
**创建日期:** 2026-02-09  
**最后更新:** 2026-02-16  
**状态:** 阶段1&2&3已完成(100%)，优化建议已实施，文档已清理合并，准备进入阶段4

---

## 一、项目概述

本项目是一个多功能集成的 AR 实时处理与监控平台，包含三个核心组件：

| 组件 | 路径 | 技术栈 | 功能 | 状态 |
|------|------|--------|------|------|
| YL-monitor | `YL-monitor/` | FastAPI + WebSocket | 统一监控平台 | ✅ 运行中 (5500) |
| AR-backend | `AR-backend/` | PyQt5 + OpenCV | 实时视频处理后端 | ✅ 运行中 (5501) |
| User GUI | `user/` | PyQt5 | 用户操作界面 | ✅ 运行中 (5502) |

---

## 二、部署文档清单

### 2.1 已创建的部署文档

| 序号 | 文档 | 内容概要 | 状态 |
|------|------|----------|------|
| 0 | [TODO_DEPLOY.md](./TODO_DEPLOY.md) | 部署任务跟踪清单 | ✅ 已更新 (v1.2.0) |
| 1 | [1.项目部署大纲.md](./1.项目部署大纲.md) | 项目整体部署规划 | 已存在 |
| 2 | [2.整体方案.md](./2.整体方案.md) | 整体技术方案 | 已存在 |
| 3 | [3.监控整合方案.md](./3.监控整合方案.md) | YL-monitor 监控 AR-backend 和 User GUI | ✅ 已创建 |
| 4 | [4.User-GUI优化方案.md](./4.User-GUI优化方案.md) | User GUI 功能修复与优化 | ✅ 已创建 |
| 5 | [5.规则架构部署.md](./5.规则架构部署.md) | 五层规则架构部署 | ✅ 已创建 |
| 6 | [6.脚本整合方案.md](./6.脚本整合方案.md) | 脚本目录整合 | ✅ 已创建 |
| 7 | [7.联调测试方案.md](./7.联调测试方案.md) | 端到端测试方案 | ✅ 已创建 |
| 8 | [统一监控面板架构方案.md](./统一监控面板架构方案.md) | 统一监控API架构设计 | ✅ 已创建 |
| 9 | [完成报告-阶段1到阶段3.md](./完成报告-阶段1到阶段3.md) | 合并完成报告 | ✅ 已创建 |

### 2.2 文档依赖关系

```
1.项目部署大纲.md
    │
    ├──► 2.整体方案.md
            │
            ├──► 3.监控整合方案.md ──► 7.联调测试方案.md
            │       └──► 完成报告-阶段1到阶段3.md (阶段1详情)
            │
            ├──► 4.User-GUI优化方案.md ──► 7.联调测试方案.md
            │       └──► 完成报告-阶段1到阶段3.md (阶段2详情)
            │
            ├──► 5.规则架构部署.md ──► 7.联调测试方案.md
            │       └──► 完成报告-阶段1到阶段3.md (阶段3详情)
            │
            └──► 6.脚本整合方案.md ──► 7.联调测试方案.md
```

---

## 三、执行路线图

### 3.1 阶段划分

```
┌─────────────────────────────────────────────────────────────┐
│ 阶段1: 监控整合 ✅ 已完成 (2026-02-16)                        │
│ ├── 任务1.1: AR-backend 添加监控端点 ✅                        │
│ ├── 任务1.2: User GUI 添加状态上报 ✅                        │
│ ├── 任务1.3: YL-monitor 配置监控目标 ✅                        │
│ └── 任务1.4: 统一监控面板 ✅                                  │
│ 验证: 所有服务运行中 (端口5500/5501/5502)                      │
├─────────────────────────────────────────────────────────────┤
│ 阶段2: User GUI 优化 ✅ 已完成 (2026-02-16)                    │
│ ├── 任务2.1: 创建 main.py 入口 ✅                            │
│ ├── 任务2.2: 创建路径修复模块 ✅                              │
│ ├── 任务2.3: 创建服务客户端 ✅                                │
│ ├── 任务2.4: 修复 GUI 功能 ✅                                │
│ └── 任务2.5: 添加配置管理 ✅                                  │
│ 验证: GUI可正常启动，所有功能可用                              │
├─────────────────────────────────────────────────────────────┤
│ 阶段3: 规则架构部署 ✅ 已完成 (100%) (2026-02-16)            │
│ ├── 任务3.1: 完善 L1 元目标层 ✅                              │
│ ├── 任务3.2: 完善 L2 理解层 ✅                                │
│ ├── 任务3.3: 完善 L3 约束层 ✅                                │
│ ├── 任务3.4: 完善 L4 决策层 ✅                                │
│ ├── 任务3.5: 完善 L5 执行层 ✅                                │
│ ├── 任务3.6: 完善规则引擎 ✅                                  │
│ └── 任务3.7: 规则集成测试 ✅                                  │
│ 验证: L1-L5全部完成，规则引擎增强，33项测试通过                 │
├─────────────────────────────────────────────────────────────┤
│ 优化建议实施 ✅ 已完成 (2026-02-16)                            │
│ ├── 修复监控器API端点 ✅ (五层监控HTTP访问)                    │
│ ├── 创建快速启动脚本 ✅ (start-all.sh)                       │
│ ├── 创建停止脚本 ✅ (stop-all.sh)                            │
│ ├── 创建状态检查脚本 ✅ (check-status.sh)                      │
│ └── 创建监控验证工具 ✅ (scripts/verify-monitoring.sh)        │
│ 验证: 所有脚本可执行，监控端点可访问                            │
├─────────────────────────────────────────────────────────────┤
│ 阶段4: 脚本整合 ⬜ 待开始 (预计 2 天)                         │
│ ├── 任务4.1: 脚本审查与分类                                   │
│ ├── 任务4.2: 迁移 YL-monitor 通用脚本                          │
│ ├── 任务4.3: 合并重复功能                                     │
│ ├── 任务4.4: 创建统一入口                                     │
│ ├── 任务4.5: 统一配置管理                                     │
│ └── 任务4.6: 统一日志格式                                     │
├─────────────────────────────────────────────────────────────┤
│ 阶段5: 联调测试 ⬜ 待开始 (预计 3-4 天)                        │
│ ├── 任务5.1: 监控整合测试                                     │
│ ├── 任务5.2: User GUI 功能测试                                │
│ ├── 任务5.3: 故障模拟测试                                     │
│ ├── 任务5.4: 脚本整合测试                                     │
│ ├── 任务5.5: 规则架构测试                                     │
│ └── 任务5.6: 端到端测试                                      │
└─────────────────────────────────────────────────────────────┘
```

### 3.2 关键里程碑

| 里程碑 | 预计时间 | 实际完成 | 交付物 | 验收标准 | 状态 |
|--------|----------|----------|--------|----------|------|
| M1: 监控整合完成 | 第3天 | 2026-02-16 | 监控服务代码 | 3个服务运行中 | ✅ 已完成 |
| M2: GUI 优化完成 | 第6天 | 2026-02-16 | User GUI 代码 | GUI 功能完整可用 | ✅ 已完成 |
| M3: 规则部署完成 | 第8天 | 2026-02-16 | 规则文件 | L1-L5全部完成 | ✅ 100%完成 |
| M4: 脚本整合完成 | 第10天 | - | 统一入口脚本 | 脚本功能完整 | ⬜ 待开始 |
| M5: 联调测试完成 | 第14天 | - | 测试报告 | 所有测试通过 | ⬜ 待开始 |

---

## 四、快速开始

### 4.1 环境准备

```bash
# 1. 进入项目目录
cd /home/vboxuser/桌面/项目部署/项目1/yl-ar-dgn_clean

# 2. 检查项目结构
ls -la

# 3. 查看当前任务状态
cat 部署/TODO_DEPLOY.md
```

### 4.2 验证所有服务

```bash
# 验证 YL-monitor
curl http://0.0.0.0:5500/api/health

# 验证 AR-backend 监控
curl http://0.0.0.0:5501/health

# 验证 User GUI 状态
curl http://0.0.0.0:5502/health

# 验证统一监控面板
curl http://0.0.0.0:5500/api/v1/monitor/ui/status
curl http://0.0.0.0:5500/api/v1/monitor/api/status
curl http://0.0.0.0:5500/api/v1/monitor/dag/list
```

### 4.3 启动 User GUI

```bash
cd user
python3 main.py
```

---

## 五、关键文件位置

### 5.1 阶段1&2&3已创建/更新的文件

| 文件 | 所属组件 | 功能 | 状态 |
|------|----------|------|------|
| `AR-backend/monitor_server.py` | AR-backend | 监控服务 | ✅ 运行中 |
| `AR-backend/README.md` | AR-backend | 文档 (v3.2.0) | ✅ 已更新 |
| `user/main.py` | User GUI | 启动入口 | ✅ 已更新 |
| `user/core/path_manager.py` | User GUI | 路径管理器 | ✅ 已创建 |
| `user/services/ar_backend_client.py` | User GUI | 服务客户端 | ✅ 已创建 |
| `user/config/settings.py` | User GUI | 配置管理器 | ✅ 已创建 |
| `user/README.md` | User GUI | 文档 (v2.2.0) | ✅ 已更新 |
| `YL-monitor/README.md` | YL-monitor | 文档 (v1.0.8) | ✅ 已更新 |
| `scripts/README.md` | Scripts | 文档 (v2.3.0) | ✅ 已更新 |
| `scripts/yl-ar-dgn.sh` | Scripts | 统一入口 | ✅ 已创建 |
| `rules/L1-meta-goal.json` | Rules | 元目标层 | ✅ 已更新 (v1.2.0) |
| `rules/L2-understanding.json` | Rules | 理解层 | ✅ 已更新 (v1.2.0) |
| `rules/L5-execution.json` | Rules | 执行层 | ✅ 已更新 (v1.2.0) |
| `rules/README.md` | Rules | 规则说明 | ✅ 已更新 |

---

## 六、问题与支持

### 6.1 常见问题

**Q1: 端口冲突怎么办？**  
A: 修改各组件的配置文件，使用备用端口（5503-5509）

**Q2: 模块导入失败怎么办？**  
A: 检查 `user/core/path_manager.py` 是否正确设置了 Python 路径

**Q3: 监控数据不更新怎么办？**  
A: 检查 WebSocket 连接，查看浏览器控制台日志

### 6.2 调试技巧

```bash
# 查看详细日志
tail -f YL-monitor/logs/app.log
tail -f AR-backend/logs/monitor.log
tail -f user/logs/user_gui.log

# 检查进程状态
ps aux | grep -E "yl-monitor|ar-backend|user-gui"

# 检查端口占用
netstat -tlnp | grep -E "5500|5501|5502"
```

---

## 七、关联文档

| 文档 | 位置 | 说明 |
|------|------|------|
| 项目 README | `README.md` | 项目总体说明 |
| AR-backend README | `AR-backend/README.md` | 后端说明 (v3.2.0) |
| YL-monitor README | `YL-monitor/README.md` | 监控平台说明 (v1.0.8) |
| User README | `user/README.md` | 用户界面说明 (v2.2.0) |
| 脚本 README | `scripts/README.md` | 脚本说明 (v2.3.0) |
| 规则 README | `rules/README.md` | 规则中心说明 |
| 任务跟踪 | `部署/TODO_DEPLOY.md` | 当前任务状态 (v1.2.0) |
| 完成报告 | `部署/完成报告-阶段1到阶段3.md` | 阶段1-3合并完成报告 |

---

## 八、版本历史

| 版本 | 日期 | 修改内容 | 作者 |
|------|------|----------|------|
| 1.0.0 | 2026-02-09 | 初始版本，创建完整部署文档集 | AI 全栈技术员 |
| 1.1.0 | 2026-02-16 | 阶段1完成，更新进度和文档索引 | AI 全栈技术员 |
| 1.2.0 | 2026-02-16 | 阶段2完成，更新所有模块README | AI 全栈技术员 |
| 1.3.0 | 2026-02-16 | 阶段3部分完成，更新规则文件和文档 | AI 全栈技术员 |
| 1.4.0 | 2026-02-16 | 清理重复文档，合并完成报告 | AI 全栈技术员 |
| 1.5.0 | 2026-02-16 | 优化建议实施完成，更新文档索引 | AI 全栈技术员 |

---

**当前状态:** 阶段1&2&3已完成(100%)，优化建议已实施，所有服务运行正常，文档已清理合并  
**总体进度:** 43% (13/30任务完成)  
**下一步:** 进入阶段4脚本整合或阶段5联调测试

### 新增快速运维脚本

| 脚本 | 功能 | 使用方式 |
|------|------|----------|
| `start-all.sh` | 一键启动所有服务 | `./start-all.sh` |
| `stop-all.sh` | 一键停止所有服务 | `./stop-all.sh` |
| `check-status.sh` | 检查所有服务状态 | `./check-status.sh` |
| `scripts/verify-monitoring.sh` | 验证五层监控架构 | `./scripts/verify-monitoring.sh` |

**实施报告:** [优化建议实施完成报告](./优化建议实施完成报告.md)

### 快速验证命令

```bash
# 验证所有服务状态
curl http://0.0.0.0:5500/api/health      # YL-monitor
curl http://0.0.0.0:5501/health          # AR-backend
curl http://0.0.0.0:5502/health          # User GUI

# 验证统一监控面板
curl http://0.0.0.0:5500/api/v1/monitor/ui/status
curl http://0.0.0.0:5500/api/v1/monitor/api/status
curl http://0.0.0.0:5500/api/v1/monitor/dag/list

# 启动User GUI
cd user && python3 main.py
