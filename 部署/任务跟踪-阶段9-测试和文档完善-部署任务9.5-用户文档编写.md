# 部署任务9.5: 用户文档编写

**任务ID:** 9.5  
**所属阶段:** 阶段9 - 测试和文档完善  
**任务名称:** 用户文档编写  
**优先级:** P1（重要优先级）  
**关键性:** 重要  
**预计工时:** 6小时  
**负责人:** 技术文档工程师  
**前置依赖:** 任务9.4完成  
**状态:** 待开始

---

## 一、任务目标

编写完整的用户文档，包括安装指南、使用手册、故障排查指南和快速入门教程。

---

## 二、工作内容

1. 安装指南编写
2. 使用手册编写
3. 故障排查指南
4. 快速入门教程
5. API使用文档

---

## 三、实施步骤

### 步骤1: 创建安装指南

```bash
cat > /home/vboxuser/桌面/项目部署/项目1/yl-ar-dgn_clean/docs/user/INSTALL.md << 'EOF'
# AR Live Studio 安装指南

## 系统要求

### 硬件要求
- **CPU**: Intel i5 或同等性能以上
- **内存**: 8GB RAM 以上
- **显卡**: 支持CUDA的NVIDIA显卡（推荐）
- **存储**: 20GB 可用空间
- **摄像头**: USB摄像头或内置摄像头

### 软件要求
- **操作系统**: Ubuntu 20.04+ / Windows 10+ / macOS 11+
- **Python**: 3.8 或更高版本
- **Docker**: 20.10+（可选，用于容器化部署）

## 安装步骤

### 1. 克隆项目
```bash
git clone https://github.com/your-org/yl-ar-dgn.git
cd yl-ar-dgn
```

### 2. 安装依赖
```bash
# 安装系统依赖（Ubuntu）
sudo apt-get update
sudo apt-get install -y python3-pip python3-venv \
    libgl1-mesa-glx libglib2.0-0 libsm6 libxext6 \
    libxrender-dev libgomp1

# 创建虚拟环境
python3 -m venv venv
source venv/bin/activate

# 安装Python依赖
pip install -r requirements.txt
```

### 3. 配置环境
```bash
# 复制环境配置模板
cp config/production.env.example config/production.env

# 编辑配置
nano config/production.env
```

### 4. 启动服务
```bash
# 启动AR-backend
cd AR-backend && ./start_monitor.sh

# 启动User GUI
cd user && python3 main.py
```

## 验证安装

访问 http://localhost:5501/health 检查服务状态。

## 常见问题

### Q: 摄像头无法打开
A: 检查摄像头权限：`ls -l /dev/video*`，确保当前用户有访问权限。

### Q: 模型加载失败
A: 检查模型文件是否存在：`ls AR-backend/models/`，必要时重新下载。
EOF

echo "✓ 安装指南已创建"
```

### 步骤2: 创建使用手册

```bash
cat > /home/vboxuser/桌面/项目部署/项目1/yl-ar-dgn_clean/docs/user/MANUAL.md << 'EOF'
# AR Live Studio 使用手册

## 界面概览

### 主界面组件
1. **视频预览区** - 显示实时视频和合成效果
2. **控制面板** - 调整合成参数
3. **效果选择** - 选择人脸合成模型
4. **状态栏** - 显示系统状态和性能指标

## 基本操作

### 1. 启动视频合成
1. 选择视频源（摄像头/文件/网络流）
2. 选择目标人脸图片
3. 调整合成参数
4. 点击"开始合成"

### 2. 调整效果
- **亮度**: 调整视频亮度 (0.5-2.0)
- **对比度**: 调整对比度 (0.5-2.0)
- **饱和度**: 调整饱和度 (0.0-2.0)
- **平滑度**: 调整合成边缘平滑度

### 3. 音频处理
1. 选择音频源
2. 选择音效（音高/混响/变速）
3. 调整效果强度
4. 实时预览效果

### 4. 输出控制
- **虚拟摄像头**: 输出到虚拟摄像头设备
- **文件录制**: 录制到文件
- **网络推流**: 推送到RTMP服务器

## 高级功能

### 批量处理
```bash
python3 scripts/batch_process.py --input-dir ./input --output-dir ./output
```

### API调用
```python
import requests

# 获取状态
response = requests.get('http://localhost:5501/status')
print(response.json())
```
EOF

echo "✓ 使用手册已创建"
```

### 步骤3: 验证用户文档

```bash
cat > /tmp/verify_user_docs.sh << 'EOF'
#!/bin/bash
echo "========================================"
echo "用户文档验证"
echo "========================================"

errors=0

# 检查安装指南
echo -n "检查安装指南... "
if [ -f "/home/vboxuser/桌面/项目部署/项目1/yl-ar-dgn_clean/docs/user/INSTALL.md" ]; then
    echo "✓ 通过"
else
    echo "✗ 失败"
    errors=$((errors + 1))
fi

# 检查使用手册
echo -n "检查使用手册... "
if [ -f "/home/vboxuser/桌面/项目部署/项目1/yl-ar-dgn_clean/docs/user/MANUAL.md" ]; then
    echo "✓ 通过"
else
    echo "✗ 失败"
    errors=$((errors + 1))
fi

echo "========================================"
if [ $errors -eq 0 ]; then
    echo "✓ 用户文档验证通过"
    exit 0
else
    echo "✗ 用户文档验证失败 ($errors 个错误)"
    exit 1
fi
EOF

chmod +x /tmp/verify_user_docs.sh
/tmp/verify_user_docs.sh
```

---

## 四、验证步骤

### 验证清单

- [ ] 安装指南编写完成
- [ ] 使用手册编写完成
- [ ] 故障排查指南编写完成
- [ ] 快速入门教程编写完成

---

## 五、预期结果

| 指标 | 目标值 | 验证方法 |
|------|--------|----------|
| 安装指南 | 完成 | 文档检查 |
| 使用手册 | 完成 | 文档检查 |
| 故障排查 | 完成 | 文档检查 |
| 快速入门 | 完成 | 文档检查 |

---

## 六、关联文档

- [任务跟踪-阶段9-测试和文档完善.md](./任务跟踪-阶段9-测试和文档完善.md)
- [任务跟踪-阶段9-测试和文档完善-部署任务9.4-性能压力测试.md](./任务跟踪-阶段9-测试和文档完善-部署任务9.4-性能压力测试.md)
- [任务跟踪-阶段9-测试和文档完善-部署任务9.6-开发文档完善.md](./任务跟踪-阶段9-测试和文档完善-部署任务9.6-开发文档完善.md)

---

**创建时间:** 2026-02-11
