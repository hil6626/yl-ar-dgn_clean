# é˜¶æ®µ4ï¼šè„šæœ¬æ•´åˆæ‰§è¡Œè®¡åˆ’

**ç‰ˆæœ¬:** 1.0.0  
**åˆ›å»ºæ—¥æœŸ:** 2026-02-16  
**çŠ¶æ€:** ğŸŸ¡ æ‰§è¡Œä¸­

---

## ğŸ“‹ å½“å‰çŠ¶æ€

### æœåŠ¡è¿è¡ŒçŠ¶æ€
| æœåŠ¡ | ç«¯å£ | çŠ¶æ€ |
|------|------|------|
| YL-monitor | 5500 | âœ… è¿è¡Œä¸­ |
| AR-backend | 5501 | âœ… è¿è¡Œä¸­ |
| User-GUI | 5502 | âœ… è¿è¡Œä¸­ |

### è„šæœ¬ç›®å½•ç°çŠ¶

**scripts/ ç›®å½•** (é¡¹ç›®çº§è„šæœ¬)
- æ ¸å¿ƒè„šæœ¬: yl-ar-dgn.sh, verify-monitoring.sh, test-rules-engine.sh
- å­ç›®å½•: cleanup/, config/, deploy/, docs/, lib/, monitor/, security/, utilities/, validation/

**YL-monitor/scripts/ ç›®å½•** (ç›‘æ§å¹³å°è„šæœ¬)
- æ ¸å¿ƒè„šæœ¬: backup.sh, docker_build.sh, run_all_monitors.sh
- å­ç›®å½•: alerts/, core/, maintenance/, monitors/, optimizers/, utils/

---

## ğŸ¯ æ•´åˆç›®æ ‡

1. **å®¡æŸ¥å’Œåˆ†ç±»**: åˆ†æä¸¤ä¸ªç›®å½•çš„è„šæœ¬åŠŸèƒ½
2. **æ¶ˆé™¤é‡å¤**: åˆå¹¶åŠŸèƒ½é‡å¤çš„è„šæœ¬
3. **ç»Ÿä¸€å…¥å£**: å®Œå–„ yl-ar-dgn.sh ç»Ÿä¸€å…¥å£
4. **é…ç½®ç®¡ç†**: åˆ›å»ºç»Ÿä¸€çš„è„šæœ¬é…ç½®
5. **æ—¥å¿—æ ¼å¼**: ç»Ÿä¸€æ‰€æœ‰è„šæœ¬çš„æ—¥å¿—è¾“å‡ºæ ¼å¼

---

## ğŸ“Š è„šæœ¬æ¸…å•åˆ†æ

### scripts/ ç›®å½•è„šæœ¬ (å·²å­˜åœ¨)

| è„šæœ¬ | åŠŸèƒ½ | ç±»åˆ« | çŠ¶æ€ |
|------|------|------|------|
| yl-ar-dgn.sh | ç»Ÿä¸€å…¥å£ | æ ¸å¿ƒ | âœ… ä¿ç•™ |
| verify-monitoring.sh | ç›‘æ§éªŒè¯ | ç›‘æ§ | âœ… ä¿ç•™ |
| test-rules-engine.sh | è§„åˆ™å¼•æ“æµ‹è¯• | æµ‹è¯• | âœ… ä¿ç•™ |
| verify_all.sh | å…¨é¢éªŒè¯ | éªŒè¯ | ğŸŸ¡ å¾…å®¡æŸ¥ |
| verify_all_v2.sh | å…¨é¢éªŒè¯v2 | éªŒè¯ | ğŸŸ¡ å¾…å®¡æŸ¥ |
| verify_infrastructure.sh | åŸºç¡€è®¾æ–½éªŒè¯ | éªŒè¯ | ğŸŸ¡ å¾…å®¡æŸ¥ |
| verify_phase7_deployment.sh | é˜¶æ®µ7éªŒè¯ | éªŒè¯ | ğŸŸ¡ å¾…å®¡æŸ¥ |
| ar-backend-verify.sh | ARåç«¯éªŒè¯ | éªŒè¯ | ğŸŸ¡ å¾…å®¡æŸ¥ |
| cleanup-services-structure.sh | æœåŠ¡æ¸…ç† | æ¸…ç† | ğŸŸ¡ å¾…å®¡æŸ¥ |
| reorganize_scripts.sh | è„šæœ¬é‡ç»„ | ç»´æŠ¤ | ğŸŸ¡ å¾…å®¡æŸ¥ |
| restructure-services.sh | æœåŠ¡é‡æ„ | ç»´æŠ¤ | ğŸŸ¡ å¾…å®¡æŸ¥ |

### YL-monitor/scripts/ ç›®å½•è„šæœ¬ (å¾…å®¡æŸ¥)

| è„šæœ¬ | åŠŸèƒ½ | ç±»åˆ« | å»ºè®® |
|------|------|------|------|
| backup.sh | å¤‡ä»½è„šæœ¬ | ç»´æŠ¤ | ğŸŸ¡ å®¡æŸ¥ |
| docker_build.sh | Dockeræ„å»º | éƒ¨ç½² | ğŸŸ¡ å®¡æŸ¥ |
| docker_start.sh | Dockerå¯åŠ¨ | éƒ¨ç½² | ğŸŸ¡ å®¡æŸ¥ |
| docker_stop.sh | Dockeråœæ­¢ | éƒ¨ç½² | ğŸŸ¡ å®¡æŸ¥ |
| run_all_monitors.sh | è¿è¡Œæ‰€æœ‰ç›‘æ§ | ç›‘æ§ | ğŸŸ¡ å®¡æŸ¥ |
| setup_vscode_testing.sh | VSCodeæµ‹è¯•é…ç½® | å¼€å‘ | ğŸŸ¡ å®¡æŸ¥ |
| test_alert_system.py | å‘Šè­¦ç³»ç»Ÿæµ‹è¯• | æµ‹è¯• | ğŸŸ¡ å®¡æŸ¥ |
| simple_alert_test.py | ç®€å•å‘Šè­¦æµ‹è¯• | æµ‹è¯• | ğŸŸ¡ å®¡æŸ¥ |
| optimize_project_structure.py | é¡¹ç›®ç»“æ„ä¼˜åŒ– | ç»´æŠ¤ | ğŸŸ¡ å®¡æŸ¥ |
| cleanup_duplicate_files.py | é‡å¤æ–‡ä»¶æ¸…ç† | æ¸…ç† | ğŸŸ¡ å®¡æŸ¥ |
| cleanup_old_files.sh | æ—§æ–‡ä»¶æ¸…ç† | æ¸…ç† | ğŸŸ¡ å®¡æŸ¥ |

---

## ğŸš€ æ‰§è¡Œæ­¥éª¤

### æ­¥éª¤1: åˆ›å»ºè„šæœ¬æ¸…å• (30åˆ†é’Ÿ)

**ä»»åŠ¡:**
- [ ] è¯¦ç»†åˆ—å‡º scripts/ æ‰€æœ‰è„šæœ¬åŠŸèƒ½
- [ ] è¯¦ç»†åˆ—å‡º YL-monitor/scripts/ æ‰€æœ‰è„šæœ¬åŠŸèƒ½
- [ ] æ ‡è®°é‡å¤åŠŸèƒ½
- [ ] åˆ›å»ºåŠŸèƒ½å¯¹ç…§è¡¨

**è¾“å‡º:** `scripts/SCRIPT_INVENTORY_V2.md`

---

### æ­¥éª¤2: åˆå¹¶é‡å¤è„šæœ¬ (1å°æ—¶)

**è¯†åˆ«é‡å¤åŠŸèƒ½:**

| åŠŸèƒ½ | scripts/ | YL-monitor/scripts/ | åˆå¹¶æ–¹æ¡ˆ |
|------|----------|---------------------|----------|
| éªŒè¯/æ£€æŸ¥ | verify_*.sh | - | ä¿ç•™ scripts/ |
| Dockeræ“ä½œ | - | docker_*.sh | è¿ç§»åˆ° scripts/deploy/ |
| ç›‘æ§è¿è¡Œ | verify-monitoring.sh | run_all_monitors.sh | åˆå¹¶åŠŸèƒ½ |
| æ¸…ç† | cleanup-*.sh | cleanup_*.sh | åˆå¹¶åˆ° scripts/cleanup/ |
| å¤‡ä»½ | - | backup.sh | è¿ç§»åˆ° scripts/maintenance/ |

**æ“ä½œ:**
- [ ] è¿ç§» YL-monitor/scripts/docker_*.sh â†’ scripts/deploy/
- [ ] è¿ç§» YL-monitor/scripts/backup.sh â†’ scripts/maintenance/
- [ ] åˆå¹¶æ¸…ç†è„šæœ¬åˆ° scripts/cleanup/
- [ ] æ›´æ–°è„šæœ¬è·¯å¾„å¼•ç”¨

---

### æ­¥éª¤3: å®Œå–„ç»Ÿä¸€å…¥å£ (30åˆ†é’Ÿ)

**å¢å¼º yl-ar-dgn.sh:**

```bash
# ç°æœ‰å‘½ä»¤
./scripts/yl-ar-dgn.sh [deploy|start|stop|restart|status|monitor|validate|logs|cleanup|health]

# æ–°å¢å‘½ä»¤
./scripts/yl-ar-dgn.sh [backup|restore|docker-build|docker-start|docker-stop]
```

**æ“ä½œ:**
- [ ] æ·»åŠ  backup å‘½ä»¤
- [ ] æ·»åŠ  restore å‘½ä»¤
- [ ] æ·»åŠ  docker-build å‘½ä»¤
- [ ] æ·»åŠ  docker-start/stop å‘½ä»¤

---

### æ­¥éª¤4: ç»Ÿä¸€é…ç½®ç®¡ç† (30åˆ†é’Ÿ)

**åˆ›å»º scripts/config/script_config.yaml:**

```yaml
# è„šæœ¬ç»Ÿä¸€é…ç½®
project:
  name: YL-AR-DGN
  root: /home/vboxuser/æ¡Œé¢/é¡¹ç›®éƒ¨ç½²/é¡¹ç›®1/yl-ar-dgn_clean

services:
  yl-monitor:
    port: 5500
    health_url: http://0.0.0.0:5500/api/health
    log_path: YL-monitor/logs/app.log
  
  ar-backend:
    port: 5501
    health_url: http://0.0.0.0:5501/health
    log_path: AR-backend/logs/monitor.log
  
  user-gui:
    port: 5502
    health_url: http://0.0.0.0:5502/health
    log_path: user/logs/user_gui.log

scripts:
  log_level: INFO
  log_format: "[%timestamp%] [%level%] %message%"
  backup_dir: backups/
  retention_days: 7
```

**æ“ä½œ:**
- [ ] åˆ›å»º script_config.yaml
- [ ] åˆ›å»ºé…ç½®è¯»å–å‡½æ•° (scripts/lib/config.sh)
- [ ] æ›´æ–°æ‰€æœ‰è„šæœ¬ä½¿ç”¨ç»Ÿä¸€é…ç½®

---

### æ­¥éª¤5: ç»Ÿä¸€æ—¥å¿—æ ¼å¼ (30åˆ†é’Ÿ)

**åˆ›å»º scripts/lib/logging.sh:**

```bash
#!/bin/bash
# ç»Ÿä¸€æ—¥å¿—æ ¼å¼

LOG_LEVEL=${LOG_LEVEL:-INFO}
LOG_FORMAT=${LOG_FORMAT:-"[%timestamp%] [%level%] %message%"}

log_info() {
    echo "[$(date '+%Y-%m-%d %H:%M:%S')] [INFO] $1"
}

log_warn() {
    echo "[$(date '+%Y-%m-%d %H:%M:%S')] [WARN] $1"
}

log_error() {
    echo "[$(date '+%Y-%m-%d %H:%M:%S')] [ERROR] $1"
}

log_debug() {
    if [ "$LOG_LEVEL" == "DEBUG" ]; then
        echo "[$(date '+%Y-%m-%d %H:%M:%S')] [DEBUG] $1"
    fi
}
```

**æ“ä½œ:**
- [ ] åˆ›å»º logging.sh
- [ ] æ›´æ–°æ‰€æœ‰è„šæœ¬å¼•ç”¨ logging.sh
- [ ] ç»Ÿä¸€æ—¥å¿—è¾“å‡ºæ ¼å¼

---

## â±ï¸ æ—¶é—´ä¼°ç®—

| æ­¥éª¤ | é¢„è®¡æ—¶é—´ | å®é™…æ—¶é—´ | çŠ¶æ€ |
|------|----------|----------|------|
| æ­¥éª¤1: åˆ›å»ºè„šæœ¬æ¸…å• | 30åˆ†é’Ÿ | - | â¬œ å¾…å¼€å§‹ |
| æ­¥éª¤2: åˆå¹¶é‡å¤è„šæœ¬ | 1å°æ—¶ | - | â¬œ å¾…å¼€å§‹ |
| æ­¥éª¤3: å®Œå–„ç»Ÿä¸€å…¥å£ | 30åˆ†é’Ÿ | - | â¬œ å¾…å¼€å§‹ |
| æ­¥éª¤4: ç»Ÿä¸€é…ç½®ç®¡ç† | 30åˆ†é’Ÿ | - | â¬œ å¾…å¼€å§‹ |
| æ­¥éª¤5: ç»Ÿä¸€æ—¥å¿—æ ¼å¼ | 30åˆ†é’Ÿ | - | â¬œ å¾…å¼€å§‹ |
| **æ€»è®¡** | **3å°æ—¶** | - | **â¬œ å¾…å¼€å§‹** |

---

## âœ… éªŒæ”¶æ ‡å‡†

- [ ] æ‰€æœ‰è„šæœ¬èŒè´£æ¸…æ™°ï¼Œæ— é‡å¤åŠŸèƒ½
- [ ] ç»Ÿä¸€å…¥å£ yl-ar-dgn.sh æ”¯æŒæ‰€æœ‰å¸¸ç”¨æ“ä½œ
- [ ] è„šæœ¬é…ç½®é›†ä¸­ç®¡ç†ï¼Œæ˜“äºä¿®æ”¹
- [ ] æ‰€æœ‰è„šæœ¬æ—¥å¿—æ ¼å¼ç»Ÿä¸€
- [ ] æ–‡æ¡£å·²æ›´æ–°ï¼Œè¯´æ˜è„šæœ¬ä½¿ç”¨æ–¹æ³•

---

## ğŸ“š å…³è”æ–‡æ¡£

- [6.è„šæœ¬æ•´åˆæ–¹æ¡ˆ.md](./6.è„šæœ¬æ•´åˆæ–¹æ¡ˆ.md) - è¯¦ç»†æ•´åˆæ–¹æ¡ˆ
- [scripts/README.md](../scripts/README.md) - è„šæœ¬è¯´æ˜
- [YL-monitor/scripts/README.md](../YL-monitor/scripts/README.md) - YL-monitorè„šæœ¬è¯´æ˜

---

**ä¸‹ä¸€æ­¥:** å¼€å§‹æ‰§è¡Œæ­¥éª¤1 - åˆ›å»ºè¯¦ç»†è„šæœ¬æ¸…å•
