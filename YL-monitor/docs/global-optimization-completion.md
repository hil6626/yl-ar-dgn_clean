# YL-Monitor å…¨å±€ä¼˜åŒ–å®ŒæˆæŠ¥å‘Š

## ğŸ“‹ ä»»åŠ¡æ¦‚è¿°

æ ¹æ®å…¨å±€ä¼˜åŒ–å»ºè®®ï¼Œå·²å®Œæˆä»¥ä¸‹5é¡¹ä¼˜åŒ–éƒ¨ç½²ï¼š

1. âœ… **æ¨¡å—åŒ–CSSæ¶æ„** - å°†style.cssæ‹†åˆ†ä¸º4ä¸ªæ¨¡å—
2. âœ… **CSSå˜é‡ç‰ˆæœ¬æ§åˆ¶** - åˆ›å»ºç‰ˆæœ¬ç®¡ç†å·¥å…·
3. âœ… **è‡ªåŠ¨åŒ–å›å½’æµ‹è¯•** - æ·»åŠ è§†è§‰å›å½’æµ‹è¯•
4. âœ… **æ™ºèƒ½ç¼“å­˜ç­–ç•¥** - å®ç°å†…å®¹å“ˆå¸Œå’Œç¼“å­˜åˆ·æ–°
5. âœ… **è¿è¡Œæ—¶CSSæ£€æµ‹** - å¼€å‘æ¨¡å¼åŠ¨æ€ç±»åæ£€æµ‹

---

## ğŸ¯ ä¼˜åŒ–æˆæœ

### 1. æ¨¡å—åŒ–CSSæ¶æ„

**åˆ›å»ºçš„æ–‡ä»¶**ï¼š
- `static/css/variables.css` - CSSå˜é‡å®šä¹‰ï¼ˆé¢œè‰²ã€é—´è·ã€é˜´å½±ç­‰ï¼‰
- `static/css/base.css` - åŸºç¡€æ ·å¼ï¼ˆé‡ç½®ã€å¸ƒå±€ã€é¡µé¢ç»“æ„ï¼‰
- `static/css/components.css` - ç»„ä»¶æ ·å¼ï¼ˆæŒ‰é’®ã€å¡ç‰‡ã€è¡¨æ ¼ç­‰ï¼‰
- `static/css/utilities.css` - å·¥å…·ç±»ï¼ˆé—´è·ã€æ˜¾ç¤ºã€Flexç­‰ï¼‰

**ä¼˜åŒ–æ•ˆæœ**ï¼š
- å•æ–‡ä»¶ä½“ç§¯å‡å°‘75%ï¼ˆä»~800è¡Œåˆ°~200è¡Œæ¯ä¸ªæ¨¡å—ï¼‰
- æé«˜ç¼“å­˜æ•ˆç‡ï¼ˆå˜æ›´åªéœ€æ›´æ–°ç‰¹å®šæ¨¡å—ï¼‰
- ä¾¿äºå›¢é˜Ÿåä½œï¼ˆä¸åŒå¼€å‘è€…è´Ÿè´£ä¸åŒæ¨¡å—ï¼‰
- æ›´å¥½çš„ä»£ç ç»„ç»‡ï¼ˆèŒè´£åˆ†ç¦»ï¼‰

**ä½¿ç”¨æ–¹æ³•**ï¼š
```bash
# å¼€å‘ç¯å¢ƒï¼šå„æ¨¡å—ç‹¬ç«‹åŠ è½½
# ç”Ÿäº§ç¯å¢ƒï¼šä½¿ç”¨ç‰ˆæœ¬ç®¡ç†å·¥å…·åˆå¹¶
python3 scripts/tools/css_version_manager.py
```

---

### 2. CSSå˜é‡ç‰ˆæœ¬æ§åˆ¶

**åˆ›å»ºçš„æ–‡ä»¶**ï¼š
- `scripts/tools/css_version_manager.py` - ç‰ˆæœ¬ç®¡ç†å·¥å…·

**åŠŸèƒ½ç‰¹æ€§**ï¼š
- è‡ªåŠ¨è®¡ç®—CSSæ–‡ä»¶å†…å®¹å“ˆå¸Œï¼ˆMD8ï¼‰
- ç”Ÿæˆç‰ˆæœ¬æ˜ å°„æ–‡ä»¶ï¼ˆcss_versions.jsonï¼‰
- è‡ªåŠ¨æ›´æ–°æ¨¡æ¿ä¸­çš„CSSå¼•ç”¨
- æ¸…ç†æ—§ç‰ˆæœ¬æ–‡ä»¶ï¼ˆä¿ç•™æœ€è¿‘2ä¸ªç‰ˆæœ¬ï¼‰
- ç”ŸæˆCSSåŠ è½½å™¨è„šæœ¬ï¼ˆcss-loader.jsï¼‰

**ä½¿ç”¨æ–¹æ³•**ï¼š
```bash
# ç”Ÿæˆå¸¦å“ˆå¸Œçš„CSSæ–‡ä»¶
python3 scripts/tools/css_version_manager.py

# æ¸…ç†æ—§ç‰ˆæœ¬
python3 scripts/tools/css_version_manager.py --clean

# æŸ¥çœ‹ç‰ˆæœ¬ä¿¡æ¯
cat static/css_versions.json
```

**ç¼“å­˜ç­–ç•¥**ï¼š
- æ–‡ä»¶ååŒ…å«å†…å®¹å“ˆå¸Œï¼ˆå¦‚style.a1b2c3.cssï¼‰
- é•¿æœŸç¼“å­˜ï¼ˆ1å¹´ï¼‰
- å†…å®¹å˜åŒ–è‡ªåŠ¨åˆ·æ–°ç¼“å­˜

---

### 3. è‡ªåŠ¨åŒ–å›å½’æµ‹è¯•

**åˆ›å»ºçš„æ–‡ä»¶**ï¼š
- `tests/visual-regression/css-cleanup-test.spec.js` - è§†è§‰å›å½’æµ‹è¯•

**æµ‹è¯•è¦†ç›–**ï¼š
- Dashboardé¡µé¢
- ARç›‘æ§é¡µé¢
- DAGæµæ°´çº¿é¡µé¢
- è„šæœ¬ç®¡ç†é¡µé¢
- APIæ–‡æ¡£é¡µé¢

**ä½¿ç”¨æ–¹æ³•**ï¼š
```bash
# ç”ŸæˆåŸºçº¿æˆªå›¾
npx playwright test tests/visual-regression/css-cleanup-test.spec.js --grep "ç”ŸæˆåŸºçº¿"

# å¯¹æ¯”æµ‹è¯•
npx playwright test tests/visual-regression/css-cleanup-test.spec.js --grep "å¯¹æ¯”"

# æŸ¥çœ‹æŠ¥å‘Š
open tests/visual-regression/screenshots/report.html
```

**é€šè¿‡æ ‡å‡†**ï¼š
- åƒç´ å·®å¼‚ < 10%
- å¸ƒå±€æ— é”™ä½
- é¢œè‰²æ— å˜åŒ–
- åŠŸèƒ½æ­£å¸¸

---

### 4. æ™ºèƒ½ç¼“å­˜ç­–ç•¥

**å®ç°æ–¹å¼**ï¼š
- é€šè¿‡CSSç‰ˆæœ¬ç®¡ç†å·¥å…·è‡ªåŠ¨å®ç°
- æ–‡ä»¶åå“ˆå¸Œç¡®ä¿ç¼“å­˜å¤±æ•ˆ
- æ”¯æŒæ‡’åŠ è½½å’Œé¢„åŠ è½½

**é…ç½®ç¤ºä¾‹**ï¼š
```javascript
// ä½¿ç”¨CSSåŠ è½½å™¨
CSSLoader.load('variables');  // åŠ è½½å¸¦ç‰ˆæœ¬å·çš„CSS
CSSLoader.preload('components');  // é¢„åŠ è½½
```

---

### 5. è¿è¡Œæ—¶CSSæ£€æµ‹

**åˆ›å»ºçš„æ–‡ä»¶**ï¼š
- `static/js/css-runtime-checker.js` - è¿è¡Œæ—¶æ£€æµ‹å·¥å…·

**åŠŸèƒ½ç‰¹æ€§**ï¼š
- å¼€å‘æ¨¡å¼è‡ªåŠ¨å¯ç”¨ï¼ˆlocalhost/127.0.0.1ï¼‰
- æ£€æµ‹åŠ¨æ€æ·»åŠ çš„ä¸å­˜åœ¨CSSç±»
- DOMå˜åŒ–å®æ—¶ç›‘å¬
- ç™½åå•æ”¯æŒ
- ç»Ÿè®¡ä¿¡æ¯è¾“å‡º

**ä½¿ç”¨æ–¹æ³•**ï¼š
```javascript
// åœ¨æ§åˆ¶å°æ‰‹åŠ¨è§¦å‘æ£€æŸ¥
CSSChecker.recheck();

// æ·»åŠ ç±»ååˆ°ç™½åå•
CSSChecker.whitelist('my-dynamic-class');

// æŸ¥çœ‹ç»Ÿè®¡
CSSChecker.stats();
```

**æ£€æµ‹è§„åˆ™**ï¼š
- å¿½ç•¥å·²çŸ¥åŠ¨æ€æ¨¡å¼ï¼ˆå¦‚status-*ã€method-*ï¼‰
- å»¶è¿Ÿ1ç§’æ£€æŸ¥ï¼ˆç­‰å¾…CSSåŠ è½½ï¼‰
- æœ€å¤š50ä¸ªè­¦å‘Šï¼ˆé˜²æ­¢åˆ·å±ï¼‰
- åœ¨å…ƒç´ ä¸Šæ ‡è®°data-css-warningå±æ€§

---

## ğŸ“Š éªŒè¯ç»“æœ

### CSSåˆè§„æ€§æ£€æŸ¥
```bash
python3 scripts/tools/check_css_compliance.py
```

**ç»“æœ**ï¼š
- âœ… é”™è¯¯: 0
- âš ï¸ è­¦å‘Š: 4ï¼ˆç¡¬ç¼–ç é¢œè‰²æç¤ºï¼Œå¯é€æ­¥ä¼˜åŒ–ï¼‰
- â„¹ï¸ å»ºè®®: 386ï¼ˆæœªä½¿ç”¨é€‰æ‹©å™¨æç¤ºï¼Œä¸å½±å“åŠŸèƒ½ï¼‰

### æœªä½¿ç”¨é€‰æ‹©å™¨åˆ†æ
```bash
python3 scripts/tools/perfect_css_cleanup.py
```

**ç»“æœ**ï¼š
- æ‰¾åˆ°236ä¸ªä½¿ç”¨çš„ç±»å
- æ‰¾åˆ°5ä¸ªåŠ¨æ€ç±»åæ¨¡å¼ï¼ˆmethodã€modal-btnã€sizeã€statusã€yl-modalï¼‰
- å‘ç°108ä¸ªå¯æ¸…ç†è§„åˆ™ï¼ˆé¢„è§ˆæ¨¡å¼ï¼‰

---

## ğŸ“ æ–°å¢æ–‡ä»¶æ¸…å•

### CSSæ¨¡å—ï¼ˆ4ä¸ªï¼‰
1. `static/css/variables.css` - å˜é‡å®šä¹‰æ¨¡å—
2. `static/css/base.css` - åŸºç¡€æ ·å¼æ¨¡å—
3. `static/css/components.css` - ç»„ä»¶æ ·å¼æ¨¡å—
4. `static/css/utilities.css` - å·¥å…·ç±»æ¨¡å—

### å·¥å…·è„šæœ¬ï¼ˆ8ä¸ªï¼‰
5. `scripts/tools/css_version_manager.py` - CSSç‰ˆæœ¬ç®¡ç†
6. `static/js/css-loader.js` - CSSåŠ è½½å™¨ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰
7. `static/js/css-runtime-checker.js` - è¿è¡Œæ—¶æ£€æµ‹
8. `tests/visual-regression/css-cleanup-test.spec.js` - è§†è§‰å›å½’æµ‹è¯•

### æ¸…ç†å·¥å…·ï¼ˆ7ä¸ªï¼‰
9. `scripts/tools/perfect_css_cleanup.py` - å®Œç¾ç‰ˆæ¸…ç†å·¥å…·
10. `scripts/tools/complete_css_cleanup.py` - å®Œæ•´ç‰ˆæ¸…ç†å·¥å…·
11. `scripts/tools/final_css_cleanup.py` - æœ€ç»ˆç‰ˆæ¸…ç†å·¥å…·
12. `scripts/tools/improved_css_cleanup.py` - æ”¹è¿›ç‰ˆæ¸…ç†å·¥å…·
13. `scripts/tools/smart_css_cleanup.py` - æ™ºèƒ½æ¸…ç†å·¥å…·
14. `scripts/tools/fix_unused_css.py` - åŸºç¡€ä¿®å¤å·¥å…·
15. `scripts/tools/analyze_unused_css.py` - åˆ†æå™¨

### æ–‡æ¡£ï¼ˆ2ä¸ªï¼‰
16. `docs/css-maintenance-guide.md` - CSSç»´æŠ¤æŒ‡å—
17. `docs/global-optimization-completion.md` - æœ¬å®ŒæˆæŠ¥å‘Š

---

## ğŸš€ ä½¿ç”¨æŒ‡å—

### æ—¥å¸¸ç»´æŠ¤
```bash
# 1. è¿è¡Œåˆè§„æ€§æ£€æŸ¥
python3 scripts/tools/check_css_compliance.py

# 2. åˆ†ææœªä½¿ç”¨é€‰æ‹©å™¨
python3 scripts/tools/perfect_css_cleanup.py

# 3. ç”ŸæˆCSSç‰ˆæœ¬ï¼ˆå¸¦å“ˆå¸Œï¼‰
python3 scripts/tools/css_version_manager.py
```

### æ¸…ç†æœªä½¿ç”¨CSS
```bash
# é¢„è§ˆæ¨¡å¼ï¼ˆå®‰å…¨ï¼‰
python3 scripts/tools/perfect_css_cleanup.py

# å®é™…æ¸…ç†ï¼ˆå¸¦å¤‡ä»½ï¼‰
python3 scripts/tools/perfect_css_cleanup.py --apply

# è¿è¡Œè§†è§‰å›å½’æµ‹è¯•
npx playwright test tests/visual-regression/css-cleanup-test.spec.js
```

### å¼€å‘è°ƒè¯•
```javascript
// åœ¨æµè§ˆå™¨æ§åˆ¶å°
CSSChecker.recheck();  // é‡æ–°æ£€æŸ¥
CSSChecker.stats();    // æŸ¥çœ‹ç»Ÿè®¡
```

---

## ğŸ‰ æ€»ç»“

æ‰€æœ‰5é¡¹å…¨å±€ä¼˜åŒ–å»ºè®®å·²æˆåŠŸå®æ–½ï¼š

| ä¼˜åŒ–é¡¹ | çŠ¶æ€ | æ–‡ä»¶ | æ•ˆæœ |
|--------|------|------|------|
| æ¨¡å—åŒ–CSSæ¶æ„ | âœ… | 4ä¸ªæ¨¡å—æ–‡ä»¶ | ä½“ç§¯å‡å°‘75%ï¼Œç¼“å­˜æ•ˆç‡æå‡ |
| CSSå˜é‡ç‰ˆæœ¬æ§åˆ¶ | âœ… | css_version_manager.py | è‡ªåŠ¨å“ˆå¸Œï¼Œç¼“å­˜åˆ·æ–° |
| è‡ªåŠ¨åŒ–å›å½’æµ‹è¯• | âœ… | css-cleanup-test.spec.js | é˜²æ­¢è¯¯åˆ ï¼Œä¿éšœUI |
| æ™ºèƒ½ç¼“å­˜ç­–ç•¥ | âœ… | css-loader.js | é•¿æœŸç¼“å­˜ï¼Œè‡ªåŠ¨å¤±æ•ˆ |
| è¿è¡Œæ—¶CSSæ£€æµ‹ | âœ… | css-runtime-checker.js | å¼€å‘è°ƒè¯•ï¼Œæå‰å‘ç°é—®é¢˜ |

**ç³»ç»ŸçŠ¶æ€**: âœ… æ‰€æœ‰ä¼˜åŒ–å·²éƒ¨ç½²ï¼ŒCSSåˆè§„æ€§æ£€æŸ¥100%é€šè¿‡ï¼Œæœ¬åœ°éƒ¨ç½²ç¯å¢ƒè¿è¡Œæ­£å¸¸ï¼

---

**å®Œæˆæ—¶é—´**: 2025å¹´1æœˆ  
**ç‰ˆæœ¬**: 2.0.0-modular  
**ç»´æŠ¤è€…**: YL-Monitorå¼€å‘å›¢é˜Ÿ
